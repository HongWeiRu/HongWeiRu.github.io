<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>è²¨æ¶ç®¡ç† - å¹³é¢åœ–å°èˆª</title>
    <style>
      /* ===== åŸºæœ¬æ¨£å¼é‡ç½® ===== */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display",
          "Helvetica Neue", sans-serif;
        background: #f8fafb;
        overflow-x: hidden;
      }

      /* ===== é ‚éƒ¨å°èˆª ===== */
      .header {
        background: linear-gradient(135deg, #2d5a4a 0%, #1e3a33 100%);
        color: white;
        padding: 20px 32px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: 0 2px 20px rgba(0, 0, 0, 0.12);
        height: 88px;
        position: relative;
        z-index: 1000;
      }

      .logo {
        display: flex;
        align-items: center;
        gap: 16px;
        font-size: 24px;
        font-weight: 600;
      }

      .logo-icon {
        width: 40px;
        height: 40px;
        background: linear-gradient(135deg, #4ade80 0%, #22c55e 100%);
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        font-size: 20px;
      }

      .header-center {
        display: flex;
        align-items: center;
        gap: 24px;
      }

      .breadcrumb {
        display: flex;
        align-items: center;
        gap: 8px;
        color: rgba(255, 255, 255, 0.8);
        font-size: 14px;
      }

      .breadcrumb-item {
        cursor: pointer;
        transition: color 0.2s;
      }

      .breadcrumb-item:hover {
        color: #4ade80;
      }

      .breadcrumb-item.active {
        color: white;
        font-weight: 600;
      }

      .user-info {
        display: flex;
        align-items: center;
        gap: 12px;
        background: rgba(255, 255, 255, 0.1);
        padding: 12px 16px;
        border-radius: 12px;
        backdrop-filter: blur(10px);
      }

      .user-avatar {
        width: 36px;
        height: 36px;
        background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 14px;
        font-weight: bold;
        color: white;
      }

      /* ===== ä¸»è¦å…§å®¹ ===== */
      .content {
        padding: 32px;
        min-height: calc(100vh - 88px);
      }

      /* ===== å¹³é¢åœ–è¦–åœ– ===== */
      .floorplan-view {
        display: block;
      }

      .floorplan-view.hidden {
        display: none;
      }

      .page-header {
        margin-bottom: 32px;
      }

      .page-title {
        font-size: 36px;
        font-weight: 700;
        color: #1f2937;
        margin-bottom: 8px;
      }

      .page-subtitle {
        color: #6b7280;
        font-size: 18px;
        font-weight: 400;
      }

      /* ===== è¦–åœ–æ§åˆ¶å·¥å…·åˆ— ===== */
      .view-controls {
        background: white;
        border-radius: 16px;
        padding: 20px 24px;
        margin-bottom: 24px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 16px;
      }

      .view-options {
        display: flex;
        gap: 16px;
        align-items: center;
      }

      .view-toggle {
        display: flex;
        background: #f3f4f6;
        border-radius: 12px;
        padding: 6px;
      }

      .toggle-btn {
        padding: 10px 20px;
        border: none;
        background: transparent;
        border-radius: 8px;
        cursor: pointer;
        font-size: 14px;
        font-weight: 500;
        transition: all 0.2s;
        white-space: nowrap;
      }

      .toggle-btn.active {
        background: white;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        color: #1f2937;
      }

      .legend {
        display: flex;
        gap: 20px;
        align-items: center;
      }

      .legend-item {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 14px;
        color: #6b7280;
      }

      .legend-color {
        width: 16px;
        height: 16px;
        border-radius: 4px;
      }

      .legend-color.active {
        background: #10b981;
      }
      .legend-color.warning {
        background: #f59e0b;
      }
      .legend-color.error {
        background: #ef4444;
      }
      .legend-color.maintenance {
        background: #8b5cf6;
      }

      /* ===== å¹³é¢åœ–å®¹å™¨ ===== */
      .floorplan-container {
        background: white;
        border-radius: 20px;
        padding: 40px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        position: relative;
        overflow: hidden;
      }

      .floorplan-map {
        position: relative;
        width: 100%;
        max-width: 1000px;
        margin: 0 auto;
        aspect-ratio: 4/3;
        background: #f8fafc;
        border: 2px solid #e5e7eb;
        border-radius: 12px;
        overflow: hidden;
      }

      /* ===== å•†åº—å€åŸŸ ===== */
      .store-areas {
        position: relative;
        width: 100%;
        height: 100%;
      }

      /* Aå€ - å»šæˆ¿ç”¨å“ */
      .area-a {
        position: absolute;
        right: 10%;
        top: 20%;
        width: 25%;
        height: 35%;
        background: rgba(16, 185, 129, 0.1);
        border: 2px solid #10b981;
        border-radius: 8px;
        display: flex;
        flex-direction: column;
      }

      /* Bå€ - å±…å®¶ç”Ÿæ´» */
      .area-b {
        position: absolute;
        right: 40%;
        top: 10%;
        width: 30%;
        height: 25%;
        background: rgba(59, 130, 246, 0.1);
        border: 2px solid #3b82f6;
        border-radius: 8px;
        display: flex;
        flex-direction: column;
      }

      /* Cå€ - æ—…éŠç”¨å“ */
      .area-c {
        position: absolute;
        right: 40%;
        top: 40%;
        width: 20%;
        height: 20%;
        background: rgba(245, 158, 11, 0.1);
        border: 2px solid #f59e0b;
        border-radius: 8px;
        display: flex;
        flex-direction: column;
      }

      /* Då€ - æ–‡å…· */
      .area-d {
        position: absolute;
        left: 5%;
        top: 15%;
        width: 15%;
        height: 50%;
        background: rgba(139, 92, 246, 0.1);
        border: 2px solid #8b5cf6;
        border-radius: 8px;
        display: flex;
        flex-direction: column;
      }

      /* Eå€ - å¥åº· */
      .area-e {
        position: absolute;
        left: 25%;
        bottom: 15%;
        width: 20%;
        height: 30%;
        background: rgba(34, 197, 94, 0.1);
        border: 2px solid #22c55e;
        border-radius: 8px;
        display: flex;
        flex-direction: column;
      }

      /* Få€ - ç¾å¦ */
      .area-f {
        position: absolute;
        left: 5%;
        bottom: 10%;
        width: 15%;
        height: 25%;
        background: rgba(236, 72, 153, 0.1);
        border: 2px solid #ec4899;
        border-radius: 8px;
        display: flex;
        flex-direction: column;
      }

      /* Gå€ - æˆæ¬ŠIP */
      .area-g {
        position: absolute;
        right: 5%;
        bottom: 15%;
        width: 20%;
        height: 30%;
        background: rgba(14, 165, 233, 0.1);
        border: 2px solid #0ea5e9;
        border-radius: 8px;
        display: flex;
        flex-direction: column;
      }

      .area-label {
        background: rgba(0, 0, 0, 0.8);
        color: white;
        padding: 8px 12px;
        font-size: 14px;
        font-weight: 600;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
      }

      .area-content {
        flex: 1;
        padding: 16px 12px;
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        align-content: flex-start;
      }

      /* ===== è²¨æ¶ç†±é» ===== */
      .shelf-hotspot {
        width: 20px;
        height: 20px;
        border-radius: 50%;
        cursor: pointer;
        transition: all 0.3s ease;
        position: relative;
        border: 2px solid white;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 10px;
        font-weight: bold;
        color: white;
      }

      .shelf-hotspot.active {
        background: #10b981;
        animation: pulse-green 2s infinite;
      }

      .shelf-hotspot.warning {
        background: #f59e0b;
        animation: pulse-orange 2s infinite;
      }

      .shelf-hotspot.error {
        background: #ef4444;
        animation: pulse-red 2s infinite;
      }

      .shelf-hotspot.maintenance {
        background: #8b5cf6;
      }

      .shelf-hotspot:hover {
        transform: scale(1.5);
        z-index: 100;
      }

      @keyframes pulse-green {
        0%,
        100% {
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2),
            0 0 0 0 rgba(16, 185, 129, 0.7);
        }
        70% {
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2),
            0 0 0 10px rgba(16, 185, 129, 0);
        }
      }

      @keyframes pulse-orange {
        0%,
        100% {
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2),
            0 0 0 0 rgba(245, 158, 11, 0.7);
        }
        70% {
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2),
            0 0 0 10px rgba(245, 158, 11, 0);
        }
      }

      @keyframes pulse-red {
        0%,
        100% {
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2),
            0 0 0 0 rgba(239, 68, 68, 0.7);
        }
        70% {
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2),
            0 0 0 10px rgba(239, 68, 68, 0);
        }
      }

      /* ===== è²¨æ¶å·¥å…·æç¤º ===== */
      .shelf-tooltip {
        position: absolute;
        background: rgba(0, 0, 0, 0.9);
        color: white;
        padding: 12px 16px;
        border-radius: 8px;
        font-size: 14px;
        white-space: nowrap;
        z-index: 200;
        opacity: 0;
        visibility: hidden;
        transition: all 0.2s;
        pointer-events: none;
      }

      .shelf-tooltip.show {
        opacity: 1;
        visibility: visible;
      }

      .shelf-tooltip::after {
        content: "";
        position: absolute;
        top: 100%;
        left: 50%;
        margin-left: -5px;
        border: 5px solid transparent;
        border-top-color: rgba(0, 0, 0, 0.9);
      }

      /* ===== çµ±è¨ˆç¸½è¦½ ===== */
      .stats-overview {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-bottom: 32px;
      }

      .stat-card {
        background: white;
        padding: 24px;
        border-radius: 16px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        text-align: center;
        border-left: 4px solid;
      }

      .stat-card.total {
        border-left-color: #3b82f6;
      }
      .stat-card.active {
        border-left-color: #10b981;
      }
      .stat-card.warning {
        border-left-color: #f59e0b;
      }
      .stat-card.error {
        border-left-color: #ef4444;
      }

      .stat-number {
        font-size: 36px;
        font-weight: 800;
        color: #1f2937;
        margin-bottom: 8px;
      }

      .stat-label {
        color: #6b7280;
        font-size: 14px;
        font-weight: 600;
      }

      /* ===== è©³ç´°è²¨æ¶è¦–åœ– ===== */
      .shelf-detail-view {
        display: none;
      }

      .shelf-detail-view.active {
        display: block;
        animation: fadeIn 0.3s ease;
      }

      .detail-header {
        background: white;
        border-radius: 16px;
        padding: 24px;
        margin-bottom: 24px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .back-btn {
        background: #f3f4f6;
        border: none;
        padding: 12px 24px;
        border-radius: 12px;
        cursor: pointer;
        font-size: 14px;
        font-weight: 500;
        color: #374151;
        transition: all 0.2s;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .back-btn:hover {
        background: #e5e7eb;
      }

      .shelf-info {
        flex: 1;
        margin: 0 24px;
      }

      .shelf-name {
        font-size: 24px;
        font-weight: 700;
        color: #1f2937;
        margin-bottom: 4px;
      }

      .shelf-location {
        color: #6b7280;
        font-size: 14px;
      }

      .shelf-actions {
        display: flex;
        gap: 12px;
      }

      .action-btn {
        padding: 10px 20px;
        border-radius: 10px;
        border: none;
        cursor: pointer;
        font-size: 14px;
        font-weight: 500;
        transition: all 0.2s;
      }

      .action-btn.primary {
        background: #3b82f6;
        color: white;
      }

      .action-btn.success {
        background: #10b981;
        color: white;
      }

      .action-btn.warning {
        background: #f59e0b;
        color: white;
      }

      .shelf-visual-detail {
        background: white;
        border-radius: 16px;
        padding: 32px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
      }

      .shelf-rows {
        display: flex;
        flex-direction: column;
        gap: 16px;
        margin-bottom: 24px;
      }

      .shelf-row {
        display: flex;
        gap: 12px;
        align-items: center;
      }

      .row-label {
        width: 30px;
        font-size: 14px;
        font-weight: 600;
        color: #6b7280;
        text-align: center;
      }

      .product-slot {
        width: 60px;
        height: 80px;
        border-radius: 8px;
        border: 2px solid #d1d5db;
        transition: all 0.2s;
        cursor: pointer;
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        font-weight: 500;
        background-size: cover;
        background-position: center;
      }

      .product-slot:hover {
        transform: scale(1.05);
      }

      .product-slot.filled {
        background: linear-gradient(135deg, #4ade80 0%, #22c55e 100%);
        border-color: #22c55e;
        color: white;
      }

      .product-slot.empty {
        background: #f9fafb;
        border-style: dashed;
        color: #9ca3af;
      }

      .product-slot.bestseller {
        background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        border-color: #d97706;
        color: white;
      }

      .product-slot.low-stock {
        background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        border-color: #dc2626;
        color: white;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* ===== éŸ¿æ‡‰å¼è¨­è¨ˆ ===== */
      @media (max-width: 768px) {
        .header {
          padding: 16px 20px;
          height: 70px;
        }

        .content {
          padding: 20px;
        }

        .page-title {
          font-size: 28px;
        }

        .floorplan-map {
          aspect-ratio: 3/4;
        }

        .stats-overview {
          grid-template-columns: repeat(2, 1fr);
          gap: 16px;
        }

        .view-controls {
          flex-direction: column;
          align-items: stretch;
        }

        .legend {
          justify-content: center;
          flex-wrap: wrap;
        }

        .shelf-row {
          gap: 8px;
        }

        .product-slot {
          width: 40px;
          height: 60px;
          font-size: 10px;
        }
      }
    </style>
  </head>
  <body>
    <!-- é ‚éƒ¨å°èˆª -->
    <header class="header">
      <div class="logo">
        <div class="logo-icon">S</div>
        <span>ShelfManager Pro</span>
      </div>
      <div class="header-center">
        <div class="breadcrumb">
          <span class="breadcrumb-item" onclick="showFloorplan()"
            >è²¨æ¶ç®¡ç†</span
          >
          <span>â€º</span>
          <span class="breadcrumb-item active" id="currentView"
            >å¹³é¢åœ–ç¸½è¦½</span
          >
        </div>
      </div>
      <div class="user-info">
        <div class="user-avatar">é™³</div>
        <div>
          <div style="font-size: 16px; font-weight: 600">é™³åº—é•·</div>
          <div style="font-size: 14px; opacity: 0.8">é–€å¸‚ç¶“ç†</div>
        </div>
      </div>
    </header>

    <main class="content">
      <!-- å¹³é¢åœ–è¦–åœ– -->
      <div class="floorplan-view" id="floorplanView">
        <div class="page-header">
          <h1 class="page-title">å•†åº—å¹³é¢åœ–ç®¡ç†</h1>
          <p class="page-subtitle">
            é»æ“Šå„å€åŸŸè²¨æ¶é€²å…¥è©³ç´°ç®¡ç†ï¼Œå³æ™‚ç›£æ§åº«å­˜ç‹€æ…‹
          </p>
        </div>

        <!-- çµ±è¨ˆç¸½è¦½ -->
        <div class="stats-overview">
          <div class="stat-card total">
            <div class="stat-number">42</div>
            <div class="stat-label">ç¸½è²¨æ¶æ•¸</div>
          </div>
          <div class="stat-card active">
            <div class="stat-number">35</div>
            <div class="stat-label">æ­£å¸¸é‹ä½œ</div>
          </div>
          <div class="stat-card warning">
            <div class="stat-number">5</div>
            <div class="stat-label">åº«å­˜ä¸è¶³</div>
          </div>
          <div class="stat-card error">
            <div class="stat-number">2</div>
            <div class="stat-label">éœ€è¦æ³¨æ„</div>
          </div>
        </div>

        <!-- è¦–åœ–æ§åˆ¶ -->
        <div class="view-controls">
          <div class="view-options">
            <div class="view-toggle">
              <button class="toggle-btn active">å³æ™‚ç‹€æ…‹</button>
              <button class="toggle-btn">éŠ·å”®ç†±åŠ›åœ–</button>
              <button class="toggle-btn">è£œè²¨è¦åŠƒ</button>
            </div>
          </div>
          <div class="legend">
            <div class="legend-item">
              <div class="legend-color active"></div>
              <span>æ­£å¸¸é‹ä½œ</span>
            </div>
            <div class="legend-item">
              <div class="legend-color warning"></div>
              <span>åº«å­˜ä¸è¶³</span>
            </div>
            <div class="legend-item">
              <div class="legend-color error"></div>
              <span>éœ€è¦è£œè²¨</span>
            </div>
            <div class="legend-item">
              <div class="legend-color maintenance"></div>
              <span>ç¶­è­·ä¸­</span>
            </div>
          </div>
        </div>

        <!-- å¹³é¢åœ–å®¹å™¨ -->
        <div class="floorplan-container">
          <div class="floorplan-map">
            <div class="store-areas">
              <!-- Aå€ - å»šæˆ¿ç”¨å“ -->
              <div class="area-a">
                <div class="area-label">
                  <span>ğŸ½ï¸</span>
                  <span>Aå€ å»šæˆ¿ç”¨å“</span>
                </div>
                <div class="area-content">
                  <div
                    class="shelf-hotspot active"
                    data-shelf="A1"
                    onclick="showShelfDetail('A1', 'Aå€æ¸…æ½”ç”¨å“è²¨æ¶', 'å»šæˆ¿æ¸…æ½”ç”¨å“')"
                  >
                    1
                  </div>
                  <div
                    class="shelf-hotspot warning"
                    data-shelf="A2"
                    onclick="showShelfDetail('A2', 'Aå€å»šå…·è²¨æ¶', 'çƒ¹é£ªå»šå…·')"
                  >
                    2
                  </div>
                  <div
                    class="shelf-hotspot active"
                    data-shelf="A3"
                    onclick="showShelfDetail('A3', 'Aå€é¤å…·è²¨æ¶', 'é¤å…·ç”¨å“')"
                  >
                    3
                  </div>
                  <div
                    class="shelf-hotspot error"
                    data-shelf="A4"
                    onclick="showShelfDetail('A4', 'Aå€èª¿æ–™è²¨æ¶', 'èª¿å‘³æ–™')"
                  >
                    4
                  </div>
                  <div
                    class="shelf-hotspot active"
                    data-shelf="A5"
                    onclick="showShelfDetail('A5', 'Aå€é£Ÿæè²¨æ¶', 'é£Ÿæé…æ–™')"
                  >
                    5
                  </div>
                  <div
                    class="shelf-hotspot active"
                    data-shelf="A6"
                    onclick="showShelfDetail('A6', 'Aå€ä¿é®®è²¨æ¶', 'ä¿é®®ç”¨å“')"
                  >
                    6
                  </div>
                </div>
              </div>

              <!-- Bå€ - å±…å®¶ç”Ÿæ´» -->
              <div class="area-b">
                <div class="area-label">
                  <span>ğŸ </span>
                  <span>Bå€ å±…å®¶ç”Ÿæ´»</span>
                </div>
                <div class="area-content">
                  <div
                    class="shelf-hotspot active"
                    data-shelf="B1"
                    onclick="showShelfDetail('B1', 'Bå€å®¶å…·è²¨æ¶', 'å±…å®¶å®¶å…·')"
                  >
                    1
                  </div>
                  <div
                    class="shelf-hotspot active"
                    data-shelf="B2"
                    onclick="showShelfDetail('B2', 'Bå€è£é£¾è²¨æ¶', 'å±…å®¶è£é£¾')"
                  >
                    2
                  </div>
                  <div
                    class="shelf-hotspot warning"
                    data-shelf="B3"
                    onclick="showShelfDetail('B3', 'Bå€ç¹”å“è²¨æ¶', 'å±…å®¶ç¹”å“')"
                  >
                    3
                  </div>
                  <div
                    class="shelf-hotspot active"
                    data-shelf="B4"
                    onclick="showShelfDetail('B4', 'Bå€æ”¶ç´è²¨æ¶', 'æ”¶ç´ç”¨å“')"
                  >
                    4
                  </div>
                </div>
              </div>

              <!-- Cå€ - æ—…éŠç”¨å“ -->
              <div class="area-c">
                <div class="area-label">
                  <span>âœˆï¸</span>
                  <span>Cå€ æ—…éŠ</span>
                </div>
                <div class="area-content">
                  <div
                    class="shelf-hotspot active"
                    data-shelf="C1"
                    onclick="showShelfDetail('C1', 'Cå€è¡Œæè²¨æ¶', 'æ—…è¡Œç®±åŒ…')"
                  >
                    1
                  </div>
                  <div
                    class="shelf-hotspot warning"
                    data-shelf="C2"
                    onclick="showShelfDetail('C2', 'Cå€é…ä»¶è²¨æ¶', 'æ—…éŠé…ä»¶')"
                  >
                    2
                  </div>
                </div>
              </div>

              <!-- Då€ - æ–‡å…· -->
              <div class="area-d">
                <div class="area-label">
                  <span>ğŸ“</span>
                  <span>Då€ æ–‡å…·</span>
                </div>
                <div class="area-content">
                  <div
                    class="shelf-hotspot active"
                    data-shelf="D1"
                    onclick="showShelfDetail('D1', 'Då€æ›¸å¯«è²¨æ¶', 'æ›¸å¯«ç”¨å“')"
                  >
                    1
                  </div>
                  <div
                    class="shelf-hotspot active"
                    data-shelf="D2"
                    onclick="showShelfDetail('D2', 'Då€æ–‡ä»¶è²¨æ¶', 'æ–‡ä»¶ç”¨å“')"
                  >
                    2
                  </div>
                  <div
                    class="shelf-hotspot error"
                    data-shelf="D3"
                    onclick="showShelfDetail('D3', 'Då€ç¾è¡“è²¨æ¶', 'ç¾è¡“ç”¨å“')"
                  >
                    3
                  </div>
                </div>
              </div>

              <!-- Eå€ - å¥åº· -->
              <div class="area-e">
                <div class="area-label">
                  <span>ğŸ’Š</span>
                  <span>Eå€ å¥åº·</span>
                </div>
                <div class="area-content">
                  <div
                    class="shelf-hotspot active"
                    data-shelf="E1"
                    onclick="showShelfDetail('E1', 'Eå€ä¿å¥è²¨æ¶', 'ä¿å¥é£Ÿå“')"
                  >
                    1
                  </div>
                  <div
                    class="shelf-hotspot warning"
                    data-shelf="E2"
                    onclick="showShelfDetail('E2', 'Eå€è­·ç†è²¨æ¶', 'è­·ç†ç”¨å“')"
                  >
                    2
                  </div>
                </div>
              </div>

              <!-- Få€ - ç¾å¦ -->
              <div class="area-f">
                <div class="area-label">
                  <span>ğŸ’„</span>
                  <span>Få€ ç¾å¦</span>
                </div>
                <div class="area-content">
                  <div
                    class="shelf-hotspot active"
                    data-shelf="F1"
                    onclick="showShelfDetail('F1', 'Få€åŒ–å¦å“è²¨æ¶', 'åŒ–å¦å“')"
                  >
                    1
                  </div>
                  <div
                    class="shelf-hotspot warning"
                    data-shelf="F2"
                    onclick="showShelfDetail('F2', 'Få€è­·è†šè²¨æ¶', 'è­·è†šç”¨å“')"
                  >
                    2
                  </div>
                  <div
                    class="shelf-hotspot active"
                    data-shelf="F3"
                    onclick="showShelfDetail('F3', 'Få€é¦™æ°´è²¨æ¶', 'é¦™æ°´é¦™æ°›')"
                  >
                    3
                  </div>
                </div>
              </div>

              <!-- Gå€ - æˆæ¬ŠIP -->
              <div class="area-g">
                <div class="area-label">
                  <span>ğŸ®</span>
                  <span>Gå€ æˆæ¬ŠIP</span>
                </div>
                <div class="area-content">
                  <div
                    class="shelf-hotspot active"
                    data-shelf="G1"
                    onclick="showShelfDetail('G1', 'Gå€ç©å…·è²¨æ¶', 'æˆæ¬Šç©å…·')"
                  >
                    1
                  </div>
                  <div
                    class="shelf-hotspot active"
                    data-shelf="G2"
                    onclick="showShelfDetail('G2', 'Gå€å‘¨é‚Šè²¨æ¶', 'å‘¨é‚Šå•†å“')"
                  >
                    2
                  </div>
                  <div
                    class="shelf-hotspot maintenance"
                    data-shelf="G3"
                    onclick="showShelfDetail('G3', 'Gå€é™å®šè²¨æ¶', 'é™å®šå•†å“')"
                  >
                    3
                  </div>
                </div>
              </div>

              <!-- ä¸­å¤®é€šé“å’Œé›»æ¢¯å€åŸŸ -->
              <div
                style="
                  position: absolute;
                  left: 45%;
                  top: 45%;
                  width: 10%;
                  height: 20%;
                  background: #e5e7eb;
                  border-radius: 8px;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  color: #6b7280;
                  font-size: 24px;
                "
              >
                ğŸ›—
              </div>
            </div>
          </div>

          <!-- å·¥å…·æç¤º -->
          <div class="shelf-tooltip" id="shelfTooltip">
            <div id="tooltipContent"></div>
          </div>
        </div>
      </div>

      <!-- è©³ç´°è²¨æ¶è¦–åœ– -->
      <div class="shelf-detail-view" id="shelfDetailView">
        <div class="detail-header">
          <button class="back-btn" onclick="showFloorplan()">
            <span>â†</span>
            <span>è¿”å›å¹³é¢åœ–</span>
          </button>
          <div class="shelf-info">
            <div class="shelf-name" id="shelfDetailName">Aå€æ¸…æ½”ç”¨å“è²¨æ¶</div>
            <div class="shelf-location" id="shelfDetailLocation">
              ä½ç½®ï¼šAå€ | é¡åˆ¥ï¼šå»šæˆ¿æ¸…æ½”ç”¨å“
            </div>
          </div>
          <div class="shelf-actions">
            <button class="action-btn primary">ç·¨è¼¯ä½ˆå±€</button>
            <button class="action-btn success">è£œè²¨æé†’</button>
            <button class="action-btn warning">ç¶­è­·æ¨¡å¼</button>
          </div>
        </div>

        <div class="shelf-visual-detail">
          <h3 style="margin-bottom: 20px; color: #1f2937">è²¨æ¶å•†å“é…ç½®</h3>
          <div class="shelf-rows" id="shelfDetailRows">
            <!-- å‹•æ…‹ç”Ÿæˆè²¨æ¶è¡Œ -->
          </div>

          <div
            style="
              margin-top: 32px;
              padding-top: 24px;
              border-top: 1px solid #e5e7eb;
            "
          >
            <div
              style="
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 20px;
              "
            >
              <div
                style="
                  background: #f8fafc;
                  padding: 16px;
                  border-radius: 12px;
                  text-align: center;
                "
              >
                <div
                  style="
                    font-size: 24px;
                    font-weight: 700;
                    color: #10b981;
                    margin-bottom: 4px;
                  "
                  id="detailUsage"
                >
                  85%
                </div>
                <div style="font-size: 14px; color: #6b7280">ä½¿ç”¨ç‡</div>
              </div>
              <div
                style="
                  background: #f8fafc;
                  padding: 16px;
                  border-radius: 12px;
                  text-align: center;
                "
              >
                <div
                  style="
                    font-size: 24px;
                    font-weight: 700;
                    color: #f59e0b;
                    margin-bottom: 4px;
                  "
                  id="detailBestsellers"
                >
                  3
                </div>
                <div style="font-size: 14px; color: #6b7280">æ˜æ˜Ÿå•†å“</div>
              </div>
              <div
                style="
                  background: #f8fafc;
                  padding: 16px;
                  border-radius: 12px;
                  text-align: center;
                "
              >
                <div
                  style="
                    font-size: 24px;
                    font-weight: 700;
                    color: #ef4444;
                    margin-bottom: 4px;
                  "
                  id="detailLowStock"
                >
                  2
                </div>
                <div style="font-size: 14px; color: #6b7280">åº«å­˜ä¸è¶³</div>
              </div>
              <div
                style="
                  background: #f8fafc;
                  padding: 16px;
                  border-radius: 12px;
                  text-align: center;
                "
              >
                <div
                  style="
                    font-size: 24px;
                    font-weight: 700;
                    color: #3b82f6;
                    margin-bottom: 4px;
                  "
                  id="detailRevenue"
                >
                  NT$15,240
                </div>
                <div style="font-size: 14px; color: #6b7280">æœ¬æœˆç‡Ÿæ”¶</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <script>
      // ===== å…¨åŸŸè®Šæ•¸ =====
      let currentShelf = null;
      let shelfData = {
        A1: {
          name: "Aå€æ¸…æ½”ç”¨å“è²¨æ¶",
          category: "å»šæˆ¿æ¸…æ½”ç”¨å“",
          usage: 89,
          bestsellers: 2,
          lowStock: 1,
          revenue: 12450,
        },
        A2: {
          name: "Aå€å»šå…·è²¨æ¶",
          category: "çƒ¹é£ªå»šå…·",
          usage: 76,
          bestsellers: 3,
          lowStock: 2,
          revenue: 18230,
        },
        A3: {
          name: "Aå€é¤å…·è²¨æ¶",
          category: "é¤å…·ç”¨å“",
          usage: 92,
          bestsellers: 1,
          lowStock: 0,
          revenue: 9850,
        },
        A4: {
          name: "Aå€èª¿æ–™è²¨æ¶",
          category: "èª¿å‘³æ–™",
          usage: 45,
          bestsellers: 4,
          lowStock: 5,
          revenue: 25670,
        },
        A5: {
          name: "Aå€é£Ÿæè²¨æ¶",
          category: "é£Ÿæé…æ–™",
          usage: 83,
          bestsellers: 2,
          lowStock: 1,
          revenue: 15240,
        },
        A6: {
          name: "Aå€ä¿é®®è²¨æ¶",
          category: "ä¿é®®ç”¨å“",
          usage: 78,
          bestsellers: 1,
          lowStock: 2,
          revenue: 11420,
        },
        B1: {
          name: "Bå€å®¶å…·è²¨æ¶",
          category: "å±…å®¶å®¶å…·",
          usage: 67,
          bestsellers: 1,
          lowStock: 0,
          revenue: 8940,
        },
        B2: {
          name: "Bå€è£é£¾è²¨æ¶",
          category: "å±…å®¶è£é£¾",
          usage: 85,
          bestsellers: 3,
          lowStock: 1,
          revenue: 16780,
        },
        B3: {
          name: "Bå€ç¹”å“è²¨æ¶",
          category: "å±…å®¶ç¹”å“",
          usage: 72,
          bestsellers: 2,
          lowStock: 3,
          revenue: 13560,
        },
        B4: {
          name: "Bå€æ”¶ç´è²¨æ¶",
          category: "æ”¶ç´ç”¨å“",
          usage: 91,
          bestsellers: 2,
          lowStock: 0,
          revenue: 19850,
        },
        C1: {
          name: "Cå€è¡Œæè²¨æ¶",
          category: "æ—…è¡Œç®±åŒ…",
          usage: 88,
          bestsellers: 1,
          lowStock: 1,
          revenue: 14230,
        },
        C2: {
          name: "Cå€é…ä»¶è²¨æ¶",
          category: "æ—…éŠé…ä»¶",
          usage: 73,
          bestsellers: 2,
          lowStock: 2,
          revenue: 10450,
        },
        D1: {
          name: "Då€æ›¸å¯«è²¨æ¶",
          category: "æ›¸å¯«ç”¨å“",
          usage: 82,
          bestsellers: 3,
          lowStock: 1,
          revenue: 12890,
        },
        D2: {
          name: "Då€æ–‡ä»¶è²¨æ¶",
          category: "æ–‡ä»¶ç”¨å“",
          usage: 79,
          bestsellers: 1,
          lowStock: 0,
          revenue: 8760,
        },
        D3: {
          name: "Då€ç¾è¡“è²¨æ¶",
          category: "ç¾è¡“ç”¨å“",
          usage: 54,
          bestsellers: 2,
          lowStock: 4,
          revenue: 15670,
        },
        E1: {
          name: "Eå€ä¿å¥è²¨æ¶",
          category: "ä¿å¥é£Ÿå“",
          usage: 86,
          bestsellers: 4,
          lowStock: 1,
          revenue: 22340,
        },
        E2: {
          name: "Eå€è­·ç†è²¨æ¶",
          category: "è­·ç†ç”¨å“",
          usage: 71,
          bestsellers: 2,
          lowStock: 3,
          revenue: 16780,
        },
        F1: {
          name: "Få€åŒ–å¦å“è²¨æ¶",
          category: "åŒ–å¦å“",
          usage: 93,
          bestsellers: 5,
          lowStock: 0,
          revenue: 28950,
        },
        F2: {
          name: "Få€è­·è†šè²¨æ¶",
          category: "è­·è†šç”¨å“",
          usage: 77,
          bestsellers: 3,
          lowStock: 2,
          revenue: 19560,
        },
        F3: {
          name: "Få€é¦™æ°´è²¨æ¶",
          category: "é¦™æ°´é¦™æ°›",
          usage: 84,
          bestsellers: 2,
          lowStock: 1,
          revenue: 17890,
        },
        G1: {
          name: "Gå€ç©å…·è²¨æ¶",
          category: "æˆæ¬Šç©å…·",
          usage: 89,
          bestsellers: 6,
          lowStock: 0,
          revenue: 24560,
        },
        G2: {
          name: "Gå€å‘¨é‚Šè²¨æ¶",
          category: "å‘¨é‚Šå•†å“",
          usage: 91,
          bestsellers: 4,
          lowStock: 1,
          revenue: 21340,
        },
        G3: {
          name: "Gå€é™å®šè²¨æ¶",
          category: "é™å®šå•†å“",
          usage: 0,
          bestsellers: 0,
          lowStock: 0,
          revenue: 0,
        },
      };

      // ===== å·¥å…·æç¤ºåŠŸèƒ½ =====
      function setupTooltips() {
        const hotspots = document.querySelectorAll(".shelf-hotspot");
        const tooltip = document.getElementById("shelfTooltip");

        hotspots.forEach((hotspot) => {
          hotspot.addEventListener("mouseenter", function (e) {
            const shelfId = this.dataset.shelf;
            const shelf = shelfData[shelfId];

            if (shelf) {
              const tooltipContent = `
                            <strong>${shelf.name}</strong><br>
                            ä½¿ç”¨ç‡: ${shelf.usage}%<br>
                            æ˜æ˜Ÿå•†å“: ${shelf.bestsellers}å€‹<br>
                            åº«å­˜ä¸è¶³: ${shelf.lowStock}å€‹
                        `;

              document.getElementById("tooltipContent").innerHTML =
                tooltipContent;

              const rect = this.getBoundingClientRect();
              const mapRect = document
                .querySelector(".floorplan-map")
                .getBoundingClientRect();

              tooltip.style.left =
                rect.left - mapRect.left + rect.width / 2 + "px";
              tooltip.style.top = rect.top - mapRect.top - 10 + "px";
              tooltip.classList.add("show");
            }
          });

          hotspot.addEventListener("mouseleave", function () {
            tooltip.classList.remove("show");
          });
        });
      }

      // ===== é¡¯ç¤ºè²¨æ¶è©³ç´°è³‡è¨Š =====
      function showShelfDetail(shelfId, shelfName, category) {
        currentShelf = shelfId;
        const shelf = shelfData[shelfId];

        document.getElementById("floorplanView").classList.add("hidden");
        document.getElementById("shelfDetailView").classList.add("active");

        // æ›´æ–°å°èˆª
        document.getElementById("currentView").textContent = shelfName;

        // æ›´æ–°è²¨æ¶è³‡è¨Š
        document.getElementById("shelfDetailName").textContent = shelfName;
        document.getElementById(
          "shelfDetailLocation"
        ).textContent = `ä½ç½®ï¼š${shelfId.charAt(0)}å€ | é¡åˆ¥ï¼š${category}`;

        // æ›´æ–°çµ±è¨ˆæ•¸æ“š
        document.getElementById("detailUsage").textContent = shelf.usage + "%";
        document.getElementById("detailBestsellers").textContent =
          shelf.bestsellers;
        document.getElementById("detailLowStock").textContent = shelf.lowStock;
        document.getElementById(
          "detailRevenue"
        ).textContent = `NT${shelf.revenue.toLocaleString()}`;

        // ç”Ÿæˆè²¨æ¶è¦–è¦ºåŒ–
        generateShelfLayout(shelfId);
      }

      // ===== è¿”å›å¹³é¢åœ– =====
      function showFloorplan() {
        document.getElementById("floorplanView").classList.remove("hidden");
        document.getElementById("shelfDetailView").classList.remove("active");
        document.getElementById("currentView").textContent = "å¹³é¢åœ–ç¸½è¦½";
        currentShelf = null;
      }

      // ===== ç”Ÿæˆè²¨æ¶ä½ˆå±€ =====
      function generateShelfLayout(shelfId) {
        const container = document.getElementById("shelfDetailRows");
        container.innerHTML = "";

        const shelf = shelfData[shelfId];
        const rows = 4; // æ ¹æ“šå¯¦éš›å•†åº—ç…§ç‰‡ï¼Œå¤§å¤šæ˜¯4å±¤
        const cols = 8; // æ¯å±¤8å€‹å•†å“ä½
        const rowLabels = ["é ‚å±¤", "ä¸Šå±¤", "ä¸­å±¤", "ä¸‹å±¤"];

        for (let r = 0; r < rows; r++) {
          const rowDiv = document.createElement("div");
          rowDiv.className = "shelf-row";

          const labelDiv = document.createElement("div");
          labelDiv.className = "row-label";
          labelDiv.textContent = rowLabels[r];
          rowDiv.appendChild(labelDiv);

          for (let c = 0; c < cols; c++) {
            const slotDiv = document.createElement("div");
            slotDiv.className = "product-slot";

            // æ ¹æ“šè²¨æ¶ç‹€æ…‹éš¨æ©Ÿåˆ†é…å•†å“ç‹€æ…‹
            const random = Math.random();
            const emptyRate = (100 - shelf.usage) / 100;

            if (random < emptyRate) {
              slotDiv.classList.add("empty");
              slotDiv.textContent = "ç©º";
            } else if (random < emptyRate + 0.15) {
              slotDiv.classList.add("bestseller");
              slotDiv.textContent = "â˜…";
            } else if (random < emptyRate + 0.25) {
              slotDiv.classList.add("low-stock");
              slotDiv.textContent = "!";
            } else {
              slotDiv.classList.add("filled");
              slotDiv.textContent = "âœ“";
            }

            rowDiv.appendChild(slotDiv);
          }

          container.appendChild(rowDiv);
        }
      }

      // ===== åˆ‡æ›è¦–åœ–æ¨¡å¼ =====
      function switchViewMode(mode) {
        const buttons = document.querySelectorAll(".toggle-btn");
        buttons.forEach((btn) => btn.classList.remove("active"));
        event.target.classList.add("active");

        // æ ¹æ“šä¸åŒæ¨¡å¼æ›´æ–°ç†±é»é¡è‰²
        const hotspots = document.querySelectorAll(".shelf-hotspot");
        switch (mode) {
          case "å³æ™‚ç‹€æ…‹":
            // ä¿æŒç¾æœ‰ç‹€æ…‹
            break;
          case "éŠ·å”®ç†±åŠ›åœ–":
            hotspots.forEach((hotspot) => {
              const shelfId = hotspot.dataset.shelf;
              const shelf = shelfData[shelfId];
              if (shelf.revenue > 20000) {
                hotspot.className = "shelf-hotspot error"; // é«˜éŠ·å”®ç”¨ç´…è‰²
              } else if (shelf.revenue > 15000) {
                hotspot.className = "shelf-hotspot warning"; // ä¸­éŠ·å”®ç”¨æ©™è‰²
              } else {
                hotspot.className = "shelf-hotspot active"; // ä½éŠ·å”®ç”¨ç¶ è‰²
              }
            });
            break;
          case "è£œè²¨è¦åŠƒ":
            hotspots.forEach((hotspot) => {
              const shelfId = hotspot.dataset.shelf;
              const shelf = shelfData[shelfId];
              if (shelf.lowStock > 3) {
                hotspot.className = "shelf-hotspot error";
              } else if (shelf.lowStock > 0) {
                hotspot.className = "shelf-hotspot warning";
              } else {
                hotspot.className = "shelf-hotspot active";
              }
            });
            break;
        }
      }

      // ===== åˆå§‹åŒ– =====
      document.addEventListener("DOMContentLoaded", function () {
        setupTooltips();

        // ç¶å®šåˆ‡æ›æŒ‰éˆ•äº‹ä»¶
        const toggleBtns = document.querySelectorAll(".toggle-btn");
        toggleBtns.forEach((btn) => {
          btn.addEventListener("click", function () {
            switchViewMode(this.textContent);
          });
        });

        console.log("å¹³é¢åœ–å°èˆªç³»çµ±åˆå§‹åŒ–å®Œæˆ");
      });
    </script>
  </body>
</html>
